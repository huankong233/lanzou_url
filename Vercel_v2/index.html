<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API 测试界面</title>
    <style>
                #get{
            max-width: 960px;
        }
        #finta{
            max-width: 960px;
        }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/mdui@1.0.2/dist/css/mdui.min.css"/>
</head>
<body
class="
mdui-drawer-body-left
mdui-appbar-with-toolbar
mdui-theme-primary-indigo
mdui-theme-accent-pink
mdui-theme-layout-dark
mdui-bottom-nav-fixed"
id="p-d">
<header class="appbar mdui-appbar mdui-appbar-fixed">
    <div class="mdui-toolbar mdui-color-theme">
      <span
        class="mdui-btn mdui-btn-icon mdui-ripple mdui-ripple-white"
        mdui-drawer="{target: '#drawer', swipe: true}"
      >
        <i class="mdui-icon material-icons">menu</i>
      </span>
      <a href="/" class="mdui-typo-headline">Vercel-Lanzou-Get Demo</a>
      <div class="mdui-toolbar-spacer"></div>
    </div>
  </header>
  <div class="mdui-drawer" id="drawer">
    <ul class="mdui-list">
    <a href="/">
      <li class="mdui-list-item mdui-ripple">
        <i class="mdui-list-item-icon mdui-icon material-icons">folder</i>
        <div class="mdui-list-item-content">主页</div>
      </li>
    </a>
    <a href="/setting.html">
      <li class="mdui-list-item mdui-ripple">
        <i class="mdui-list-item-icon mdui-icon material-icons">settings</i>
        <div class="mdui-list-item-content">设置</div>
      </li>
    </a>
    </ul>
  </div>
  <div id="main">
    <center>
    <div class="mdui-panel-item mdui-panel-item-open" id="get">
        <div class="mdui-panel-item-header">获取信息 目前仅支持Vercel部署和V2版本</div>
        <div class="mdui-panel-item-body">
            <div class="mdui-textfield mdui-textfield-floating-label">
                <label class="mdui-textfield-label">蓝奏云分享链接</label>
                <input class="mdui-textfield-input" type="text" required id="lanzou"/>
                <div class="mdui-textfield-error">此选项不能为空</div>
              </div>
              <div class="mdui-textfield mdui-textfield-floating-label">
                <label class="mdui-textfield-label">密码（可不填）</label>
                <input class="mdui-textfield-input" type="text" id="pwd" />
              </div>
        </div>
      </div>
      <button class="mdui-btn mdui-btn-raised mdui-ripple mdui-color-theme-accent" onclick="get()">请求</button>
    </center>
  </div>
  <center>
  <div class="mdui-panel-item mdui-panel-item-open" id="finta">
    <div class="mdui-panel-item-header">结果显示 （仅支持URL）</div>
    <div class="mdui-panel-item-body" id="fin">
        <p>还没有结果哦</p>
    </div>
  </div>
</center>
    <script src="https://unpkg.com/mdui@1.0.2/dist/js/mdui.min.js"></script>
<script>
    mdui.snackbar({
    message: 'Demo测试使用',
    position: 'right-bottom',
  });

function get(){
    var channel = localStorage.getItem("apipath")
    if (channel==""){
        var channel = window.location.protocol+"//"+window.location.host+"/api";
    }
    if (channel==null){
        var channel = window.location.protocol+"//"+window.location.host+"/api";
    }
    mdui.snackbar({
        message: '获取中',
        position: 'right-bottom',
      });
      fetch (channel+"?url="+document.getElementById('lanzou').value+"&pass="+document.getElementById('pwd').value).then(function(response){
        //打印返回的json数据
        response.json().then(function(data){
            document.getElementById("fin").innerHTML = data.url
        })
    }).catch(function(e){
        console.log('error: ' + e.toString());
    })
}
</script>

</body>
</html>